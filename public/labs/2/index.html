<!doctype html><html lang=en dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Table of contents
  #

{: .no_toc .text-delta }

TOC
{:toc}


Welcome to Lab 2! In this lab you will be learning how to work productively in a shell and use that to write your first shell script.
Remember to submit your answers in the Gradescope assignment!
Don&rsquo;t forget to use Google and man when stuck. The resources linked at the bottom may be helpful as well.

  

  Setting up
  #

This lab can be completed either on tsunami by logging in using ssh or on the VM you set up in the previous lab.
This lab requires a bash shell, vim, and tmux.
If you do not have tmux or vim installed: sudo apt install vim tmux"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/labs/2/"><meta property="og:site_name" content="Sysadmin DeCal"><meta property="og:title" content="Lab 2 - Core Shell & Shell Scripting"><meta property="og:description" content="Table of contents # {: .no_toc .text-delta }
TOC {:toc} Welcome to Lab 2! In this lab you will be learning how to work productively in a shell and use that to write your first shell script.
Remember to submit your answers in the Gradescope assignment!
Donâ€™t forget to use Google and man when stuck. The resources linked at the bottom may be helpful as well.
Setting up # This lab can be completed either on tsunami by logging in using ssh or on the VM you set up in the previous lab. This lab requires a bash shell, vim, and tmux. If you do not have tmux or vim installed: sudo apt install vim tmux"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="labs"><title>Lab 2 - Core Shell & Shell Scripting | Sysadmin DeCal</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=http://localhost:1313/labs/2/><link rel=stylesheet href=/book.min.a66993900f9437bc8b9f3d67f5fea86cd8f2c5ca3eaecc1e818bb26d7ac89625.css integrity="sha256-pmmTkA+UN7yLnz1n9f6obNjyxco+rswegYuybXrIliU=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.28d1e126de307ffcd3a8254d9f1c14303f0918b2dfde22cc673bdc49855798da.js integrity="sha256-KNHhJt4wf/zTqCVNnxwUMD8JGLLf3iLMZzvcSYVXmNo=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Sysadmin DeCal</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/about/>About</a></li><li><input type=checkbox id=section-638171d5990482642c69d9e2d942b1e4 class=toggle>
<label for=section-638171d5990482642c69d9e2d942b1e4 class=flex><a role=button class=flex-auto>Announcements</a></label><ul><li><a href=/announcements/week-0/>Week 0</a></li><li><a href=/announcements/week-1/>Week 1</a></li><li><a href=/announcements/week-2/>Week 2</a></li><li><a href=/announcements/week-3/>Week 3</a></li><li><a href=/announcements/week-4/>Week 4</a></li><li><a href=/announcements/week-5/>Week 5</a></li><li><a href=/announcements/week-6/>Week 6</a></li><li><a href=/announcements/week-7/>Week 7</a></li><li><a href=/announcements/week-8/>Week 8</a></li><li><a href=/announcements/week-9/>Week 9</a></li></ul></li><li><input type=checkbox id=section-70822959fae8f27c0f79dc3a8400cebe class=toggle checked>
<label for=section-70822959fae8f27c0f79dc3a8400cebe class=flex><a role=button class=flex-auto>Labs</a></label><ul><li><a href=/labs/1/>Lab 1 - Unix, the Shell, OSS</a></li><li><a href=/labs/2/ class=active>Lab 2 - Core Shell & Shell Scripting</a></li><li><a href=/labs/3/>Lab 3 - Packages and Packaging</a></li><li><a href=/labs/4/>Lab 4 - Processes and Services</a></li><li><a href=/labs/5/>Lab 5 - Introduction to Networking</a></li><li><a href=/labs/6/>Lab 6 - Web Servers</a></li><li><a href=/labs/7/>Lab 7 - Security Fundamentals</a></li><li><a href=/labs/8/>Lab 8 - Version Control and Backups</a></li><li><a href=/labs/9/>Lab 9 - Containers (Docker)</a></li><li><a href=/labs/10/>Lab 10 - Puppet</a></li><li><a href=/labs/11/>Lab 11 - Kubernetes</a></li><li><a href=/labs/12/>Lab 12 - CUDA</a></li></ul></li><li><a href=/staff/>Staff</a></li><li><a href=/resources/>Resources</a></li></ul><ul><li><a href=https://github.com/alex-shpak/hugo-book target=_blank rel=noopener>Ed</a></li><li><a href=https://themes.gohugo.io/themes/hugo-book/ target=_blank rel=noopener>OCF</a></li><li><a href=https://themes.gohugo.io/themes/hugo-book/ target=_blank rel=noopener>Github</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Lab 2 - Core Shell & Shell Scripting</h3><label for=toc-control></label></div></header><article class="markdown book-article"><h2 id=table-of-contents>Table of contents
<a class=anchor href=#table-of-contents>#</a></h2><p>{: .no_toc .text-delta }</p><ol><li>TOC
{:toc}</li></ol><hr><p>Welcome to Lab 2! In this lab you will be learning how to work productively in a shell and use that to write your first shell script.</p><p>Remember to submit your answers in the Gradescope assignment!</p><p>Don&rsquo;t forget to use Google and <code>man</code> when stuck. The resources linked at the bottom may be helpful as well.</p><p><img src=https://imgs.xkcd.com/comics/automation.png alt="XKCD 1319"></p><h2 id=setting-up>Setting up
<a class=anchor href=#setting-up>#</a></h2><p>This lab can be completed either on tsunami by logging in using ssh or on the VM you set up in the previous lab.
This lab requires a bash shell, <code>vim</code>, and <code>tmux</code>.
If you do not have tmux or vim installed: <code>sudo apt install vim tmux</code></p><h2 id=a-quick-intro-to-vim>A quick intro to <code>vim</code>
<a class=anchor href=#a-quick-intro-to-vim>#</a></h2><p><code>vim</code> is a very widely used text editor. It&rsquo;s well known for its customizability and plethora of keybinds. While it may be somewhat unintuitive to use at first (since a lot of common keybinds for things like copy-paste, saving, or exiting don&rsquo;t do what you think they will), it&rsquo;s well worth learning about, and you&rsquo;ll certainly come across it all the time when working in the shell!</p><h3 id=why-vim>Why <code>vim</code>?
<a class=anchor href=#why-vim>#</a></h3><ul><li>It&rsquo;s a descendant of vi, which was written in Berkeley by Bill Joy, who went on to found Sun Microsystems.</li><li>Sometimes you will be suddenly thrown into <code>vim</code> via merging git conflicts or other programs.</li><li>It&rsquo;s included in practically every UNIX environment.</li><li>You can be very productive when familiar with it.</li></ul><h3 id=hello-world>Hello World
<a class=anchor href=#hello-world>#</a></h3><p>To get started with learning <code>vim</code>, run the command <code>vimtutor</code>. This will walk you through the below material in an interactive manner! You aren&rsquo;t required to finish the entire tutorial, but we encourage you to at least complete lesson 1. You can then use this section as reference if you forget anything.</p><h3 id=the-vim-modes>The <code>vim</code> Modes
<a class=anchor href=#the-vim-modes>#</a></h3><p>Vim is a modal text editor, meaning that you can change editing modes in order to do different things. There are 3 primarily used modes: <strong>Normal</strong>, <strong>Insert</strong>, and <strong>Visual</strong> mode.</p><h4 id=normal-mode>Normal mode:
<a class=anchor href=#normal-mode>#</a></h4><ul><li>Used for moving around and performing actions<ul><li><code>hjkl</code> to move left, up, down, and right (arrow keys work too but hjkl is usually faster to use!)</li><li><code>G</code> to move to end of file, <code>gg</code> to move to beginning</li><li><code>i</code> to enter <strong>i</strong>nsert mode (<code>a</code>, <code>o</code> also change mode in different ways)</li><li><code>dd</code> to cut a line</li><li><code>yy</code> to copy a line</li><li><code>p</code> to paste</li><li><code>/</code> to search</li><li><code>u</code> to undo</li></ul></li><li>Type in commands with <code>:</code><ul><li>Save with <code>:w</code></li><li>Exit with <code>:q</code></li></ul></li><li>Explore more commands online! Here&rsquo;s a cool
<a href=https://devhints.io/vim>cheat sheet</a> to get you started.</li></ul><h4 id=insert-mode>Insert mode:
<a class=anchor href=#insert-mode>#</a></h4><p><img src=https://d26aqo05ggejx9.cloudfront.net/i.gif alt=Example></p><ul><li>Used for editing text like a usual editor</li><li>Arrow keys to move</li><li>Esc to exit to normal mode (lots of people bind it to Caps Lock)</li></ul><h4 id=visual-mode>Visual mode:
<a class=anchor href=#visual-mode>#</a></h4><ul><li>Enter with <code>v</code> from normal mode</li><li>Used to select text visually</li><li>Modify selection with normal mode movement commands</li><li>Use <code>o</code> to move the cursor to the other side of the selection</li><li>Yanking, deleting, and pasting use <code>y</code>, <code>d</code>, <code>p</code> (sound familiar?)</li></ul><p>A key feature of <code>vim</code> is <strong>chaining together commands</strong>.
Normal mode is essentially a massive amount of shortcuts that you can combine to quickly navigate and edit a file.
Want to move down 3 lines?
You know that <code>j</code> means move down 1 line, so you can use <code>3j</code> to move down 3.
<code>d</code> is for deletion and <code>w</code> is to jump to the next word, so what does <code>dw</code> do?</p><h3 id=questions>Questions
<a class=anchor href=#questions>#</a></h3><p>Try playing around with
<a href=https://raw.githubusercontent.com/0xcf/decal-web/master/labs/2.md>lab2.md</a> while looking up some new commands. Use <code>wget</code> to download it!</p><ol><li>How would you delete the previous 10 lines?</li><li>How would you jump back to the shell without exiting <code>vim</code>?</li><li>How would you edit a new file alongside another file?</li><li>How would you indent a block of text?</li><li>Tell us about one other cool vim feature you found out about that isn&rsquo;t mentioned in this lab!</li></ol><h2 id=a-quick-intro-to-tmuxoptional>A quick intro to tmux(Optional)
<a class=anchor href=#a-quick-intro-to-tmuxoptional>#</a></h2><p>While we reccomend that you complete this section of the lab, it&rsquo;s completely optional and will not affect your lab grade. Feel free to skip ahead to the
<a href=#scripting>Scripting Section</a>.</p><p><img src=https://lightrains.com/assets/img/blog/tmux-tips.png alt=Example></p><h3 id=why-tmux>Why tmux?
<a class=anchor href=#why-tmux>#</a></h3><ul><li>You can open multiple windows when sshed into a machine.</li><li>You can go compile and run programs while editing them.</li><li>You can logout and ssh back in without having to reopen all your files.</li></ul><h3 id=getting-started>Getting Started:
<a class=anchor href=#getting-started>#</a></h3><ul><li>Start a session with <code>tmux</code>.</li><li>Detach from a session with <code>Ctrl-b d</code> (press d after releasing <code>Ctrl-b</code>)</li><li>Split into 2 panes with <code>Ctrl-b %</code> (vertical) or <code>Ctrl-b "</code> (horizontal)</li><li>Swap current pane with <code>Ctrl-b o</code></li><li>Find more information about tmux online. You might find [this cheat sheet][Tmux cheat sheet] helpful!</li></ul><h3 id=questions-optional>Questions (Optional)
<a class=anchor href=#questions-optional>#</a></h3><ol start=6><li>Make a new tmux session. Using tmux shortcuts, try to make your session have a similar layout to the one below, and <strong>upload a screenshot of it to Gradescope!</strong></li></ol><p><img src=/assets/images/labs/b2/tmux-layout.png alt="tmux layout"></p><p>Some things to note:</p><ul><li>The top left panel is resized. By how much, it doesn&rsquo;t matter.</li><li>The top right panel is named &ldquo;Hello World&rdquo;. (You can see this name displayed on the bottom left.)</li><li>You don&rsquo;t need to run any of the commands I did, but they do look pretty cool :) Try to figure out what command the bottom panel is running, and what it does!</li><li>Don&rsquo;t worry about copying the layout exactly. The purpose of this exercise is simply to help you get comfortable making custom layouts in tmux.</li></ul><ol start=10><li>If you haven&rsquo;t already, detach from your current tmux session using <code>Ctrl+b d</code>. Now, what command would you type to attach back to it?</li><li>What command will delete your session?</li><li>What command will create a new session?</li></ol><h2 id=scripting>Scripting
<a class=anchor href=#scripting>#</a></h2><h2 id=why-scripting>Why Scripting?
<a class=anchor href=#why-scripting>#</a></h2><p>Many of the tasks that someone would like to perform on a computer are regular,
require repetition, or are menial or tedious to do by hand. Shell scripting
allows one to interact programmatically with a shell to do certain tasks. For
example, the command for scanning log files in the previous topic guide could
be automated to be performed on a schedule by means of a shell script. <code>bash</code>
scripts are an incredibly powerful tool for sysadmins to automate tasks that
are otherwise difficult to remember or long-running.</p><p>In cases where shell syntax is inappropriate for the task at hand, one can
instead call into programs written in other languages, such as Python, which
can read from stdin, process data, and write to stdout.</p><p>Before you jump into the assignment we reccomend reading through our
<a href=/labs/scripting>Scripting Reference</a> which provides a introduction to Bash and Python(optional part in this lab) scripting in Linux. Feel free to come back to this reference as you work through the assignment.</p><h2 id=scripting-lab-assignment>Scripting Lab Assignment
<a class=anchor href=#scripting-lab-assignment>#</a></h2><p>You&rsquo;ll be completing a classic first shell scripting assignment: make a
phonebook.</p><p>Write a shell script <code>phonebook</code> which has the following behavior:</p><ul><li><p><code>./phonebook new &lt;name> &lt;number></code> adds an entry to the phonebook. Don&rsquo;t worry about duplicates (always add a new entry, even if the name is the same).</p></li><li><p><code>./phonebook list</code> displays every entry in the phonebook (in no particular
order). If the phonebook has no entries, display <code>phonebook is empty</code></p></li><li><p><code>./phonebook remove &lt;name></code> deletes all entries associated with that name. Do nothing if that name is not in the phonebook.</p></li><li><p><code>./phonebook clear</code> deletes the entire phonebook.</p></li><li><p><code>./phonebook lookup &lt;name></code> displays all phone number(s) associated with that name. You can assume all phone numbers are in the form <code>ddd-ddd-dddd</code> where <code>d</code> is a digit from 0-9.</p><ul><li><strong>NOTE:</strong> You can print the name as well as the number for each line. For an additional challenge, try printing all phone numbers <em>without</em> their names. (See the example below for more details)</li></ul></li></ul><p>For example,</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ ./phonebook new <span style=color:#e6db74>&#34;Linus Torvalds&#34;</span> 101-110-0111
</span></span><span style=display:flex><span>$ ./phonebook list
</span></span><span style=display:flex><span>Linus Torvalds 101-110-1010
</span></span><span style=display:flex><span>$ ./phonebook new <span style=color:#e6db74>&#34;Tux Penguin&#34;</span> 555-666-7777
</span></span><span style=display:flex><span>$ ./phonebook new <span style=color:#e6db74>&#34;Linus Torvalds&#34;</span> 222-222-2222
</span></span><span style=display:flex><span>$ ./phonebook list
</span></span><span style=display:flex><span>Linus Torvalds 101-110-1010
</span></span><span style=display:flex><span>Tux Penguin 555-666-7777
</span></span><span style=display:flex><span>Linus Torvalds 222-222-2222
</span></span><span style=display:flex><span><span style=color:#75715e># OPTIONAL BEHAVIOR</span>
</span></span><span style=display:flex><span>$ ./phonebook lookup <span style=color:#e6db74>&#34;Linus Torvalds&#34;</span> 
</span></span><span style=display:flex><span>101-110-1010
</span></span><span style=display:flex><span>222-222-2222
</span></span><span style=display:flex><span><span style=color:#75715e># ALTERNATIVE BEHAVIOR</span>
</span></span><span style=display:flex><span>$ ./phonebook lookup <span style=color:#e6db74>&#34;Linus Torvalds&#34;</span>
</span></span><span style=display:flex><span>Linus Torvalds 101-110-1010
</span></span><span style=display:flex><span>Linus Torvalds 222-222-2222
</span></span><span style=display:flex><span>$ ./phonebook remove <span style=color:#e6db74>&#34;Linus Torvalds&#34;</span>
</span></span><span style=display:flex><span>$ ./phonebook list
</span></span><span style=display:flex><span>Tux Penguin 555-666-7777
</span></span><span style=display:flex><span>$ ./phonebook clear
</span></span><span style=display:flex><span>$ ./phonebook list
</span></span><span style=display:flex><span>phonebook is empty
</span></span></code></pre></div><p>If you run into an edge case that isn&rsquo;t described here, you can handle it however you wish (or don&rsquo;t handle it at all). You can assume all inputs are in the correct format.</p><h2 id=skeleton-code>Skeleton Code
<a class=anchor href=#skeleton-code>#</a></h2><p>To help you in this task, skeleton code for this lab can be found
<a href=https://github.com/0xcf/decal-labs/tree/master/2>here</a>.
Once you are done with this task, you can submit your work on Gradescope.</p><p><strong>As an optional (but recommended) assignment:</strong> Try implementing the same
Phonebook behavior, but in <code>python</code>! This will highlight some of the strengths
and weaknesses between the two languages. If you&rsquo;re already familiar with <code>python</code>,
you may find it helpful to do this before implementing it in <code>bash</code>.</p><h2 id=some-tips-to-make-things-easier>Some tips to make things easier
<a class=anchor href=#some-tips-to-make-things-easier>#</a></h2><ul><li><code>bash</code> has an append operator <code>>></code> which, as you might guess, appends the
data from its first argument to the end of the second argument.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat foobar.txt
</span></span><span style=display:flex><span>foobar
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>&#34;hello, reader&#34;</span> &gt;&gt; foobar.txt
</span></span><span style=display:flex><span>$ cat foobar.txt
</span></span><span style=display:flex><span>foobar
</span></span><span style=display:flex><span>hello, reader
</span></span></code></pre></div><ul><li><code>bash</code> also has a redirect operator <code>></code>, which takes the output of one
command and outputs it to a file.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat foobar.txt
</span></span><span style=display:flex><span>foobar
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>&#34;hello&#34;</span> &gt; foobar.txt
</span></span><span style=display:flex><span>$ cat foobar.txt
</span></span><span style=display:flex><span>hello
</span></span><span style=display:flex><span>$ &gt; foobar.txt
</span></span><span style=display:flex><span>$ cat foobar.txt
</span></span><span style=display:flex><span>$
</span></span></code></pre></div><ul><li>Remember that you can simply write to and read from a file to persist data.</li><li>In bash, changing lines can be done through the <code>sed</code> command. If you wish to do so, the format
<code>sed -i "s/&lt;old>/&lt;new>/g" ./filename</code> may be helpful in this lab (e.g. for deleting a line or part of a line). For example:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ echo <span style=color:#e6db74>&#34;hello 123&#34;</span> &gt; foobar.txt <span style=color:#75715e># writes hello to foobar.txt</span>
</span></span><span style=display:flex><span>$ cat foobar.txt
</span></span><span style=display:flex><span>hello <span style=color:#ae81ff>123</span>
</span></span><span style=display:flex><span>$ sed -i <span style=color:#e6db74>&#34;s/h/j/g&#34;</span> foobar.txt
</span></span><span style=display:flex><span>$ cat foobar.txt
</span></span><span style=display:flex><span>jello <span style=color:#ae81ff>123</span>
</span></span><span style=display:flex><span><span style=color:#75715e># You can also use regex: learn more at regex101.com</span>
</span></span><span style=display:flex><span>$ sed -i <span style=color:#e6db74>&#34;s/[0-9]\{3\}/world/g&#34;</span> foobar.txt
</span></span><span style=display:flex><span>$ cat foobar.txt
</span></span><span style=display:flex><span>jello world
</span></span></code></pre></div><ul><li>Recall that <code>bash</code> exposes its command line arguments through the
<code>$&lt;integer></code> positional parameters:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e># contents of argscript.sh</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;</span>$2<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ ./argscript.sh foo bar
</span></span><span style=display:flex><span>foo
</span></span><span style=display:flex><span>bar
</span></span></code></pre></div><ul><li>In <code>bash</code>, single quotes <code>''</code> preserve the literal value of the characters
they enclose. Double quotes <code>""</code> preserve the literal value of all characters
except for <code>$</code>, backticks <code>`</code>, and the backslash <code>\\</code>. The most important
implication of this is that double quotes allow for variable interpolation,
while single quotes do not. You can think of single quotes and the stronger
&ldquo;escape everything&rdquo; syntax while double quotes are the more lax &ldquo;escape most
things&rdquo; syntax.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ echo <span style=color:#e6db74>&#39;$LANG&#39;</span>
</span></span><span style=display:flex><span>$LANG
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>&#34;</span>$LANG<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>en_US.UTF-8
</span></span></code></pre></div><ul><li>In <code>python</code>, you can interact with command-line arguments through the
<code>sys.argv</code> list</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># !/usr/bin/python</span>
</span></span><span style=display:flex><span><span style=color:#75715e># contents of argscript.py</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys 
</span></span><span style=display:flex><span>print(sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>]) 
</span></span><span style=display:flex><span>print(sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>2</span>])
</span></span><span style=display:flex><span><span style=color:#75715e># end of file</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ ./argscript.py foo bar
</span></span><span style=display:flex><span>foo
</span></span><span style=display:flex><span>bar
</span></span></code></pre></div><ul><li><code>python</code> lets you manipulate files with the <code>open</code> function, commonly used
with the <code>with</code> control structure</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># !/usr/bin/python</span>
</span></span><span style=display:flex><span><span style=color:#75715e># contents of fileman.py</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> open(<span style=color:#e6db74>&#39;./newfile.txt&#39;</span>, <span style=color:#e6db74>&#39;w&#39;</span>) <span style=color:#66d9ef>as</span> f: f<span style=color:#f92672>.</span>write(<span style=color:#e6db74>&#34;hello from python</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># end of file</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ python fileman.py
</span></span><span style=display:flex><span>$ cat newfile.txt
</span></span><span style=display:flex><span>hello from python
</span></span></code></pre></div><ul><li>If you are getting permission denied issues, you will probably need to make your <code>phonebook.sh</code> executable: <code>chmod +x phonebook.sh</code></li></ul><h2 id=submitting-the-lab>Submitting the lab
<a class=anchor href=#submitting-the-lab>#</a></h2><p>Once you&rsquo;re done remember to submit your answers to Gradescope.
There are multiple valid answers for some of the questions.</p><p>For the scripting assignment, you will need to upload a file containing your script. If you edit and test your script in your VM using <code>vim</code> or another shell editor, you can
<a href=https://linuxize.com/post/how-to-use-scp-command-to-securely-transfer-files/#copy-a-remote-file-to-a-local-system-using-the-scp-command>copy the file to your local machine using <code>scp</code></a> or simply copy-paste the text into a local file.</p><p>Don&rsquo;t be stressed about getting something correct; just have fun exploring.We&rsquo;ll release the answers after the lab is due!</p><h2 id=additional-resources>Additional Resources
<a class=anchor href=#additional-resources>#</a></h2><p><a href=http://teohm.com/blog/shortcuts-to-move-faster-in-bash-command-line/>Keybindings</a></p><p><a href=http://yannesposito.com/Scratch/en/blog/Learn-Vim-Progressively/>Learning vim progressively</a></p><p><a href=https://gist.github.com/MohamedAlaa/2961058>Tmux cheat sheet</a></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><div class="flex flex-wrap justify-between"><span><a href=/labs/1/ class="flex align-center book-icon"><img src=/svg/backward.svg class=book-icon alt=Previous title="Lab 1 - Unix, the Shell, OSS">
<span>Lab 1 - Unix, the Shell, OSS</span>
</a></span><span><a href=/labs/3/ class="flex align-center book-icon"><span>Lab 3 - Packages and Packaging</span>
<img src=/svg/forward.svg class=book-icon alt=Next title="Lab 3 - Packages and Packaging"></a></span></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div></main></body></html>