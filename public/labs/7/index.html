<!doctype html><html lang=en dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="For this lab, we will use 
  GnuPG (also referred to as GPG), a free implementation of the 
  OpenPGP standard. As stated by GPG&rsquo;s website:

GnuPG allows you to encrypt and sign your data and communications; it features a versatile key management system, along with access modules for all kinds of public key directories.
The 
  GPG manual page might be useful.

  Encryption and Decryption
  #

Encryption takes in a plaintext and a key, returning ciphertext. Decryption takes in a ciphertext and a key, recovering and returning the original plaintext only if the decryption key is valid. The keys for encryption and decryption are long strings of random bits that make it computationally infeasible for an attacker to guess the key and decrypt a ciphertext."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/labs/7/"><meta property="og:site_name" content="OCF Sysadmin DeCal"><meta property="og:title" content="Lab 7 - Security Fundamentals"><meta property="og:description" content="For this lab, we will use GnuPG (also referred to as GPG), a free implementation of the OpenPGP standard. As stated by GPGâ€™s website:
GnuPG allows you to encrypt and sign your data and communications; it features a versatile key management system, along with access modules for all kinds of public key directories.
The GPG manual page might be useful.
Encryption and Decryption # Encryption takes in a plaintext and a key, returning ciphertext. Decryption takes in a ciphertext and a key, recovering and returning the original plaintext only if the decryption key is valid. The keys for encryption and decryption are long strings of random bits that make it computationally infeasible for an attacker to guess the key and decrypt a ciphertext."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="labs"><title>Lab 7 - Security Fundamentals | OCF Sysadmin DeCal</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=http://localhost:1313/labs/7/><link rel=stylesheet href=/book.min.5d66a598a957a57db9eb1e614a4e20c2bc6f81b607613fa13e31fc22786d762f.css integrity="sha256-XWalmKlXpX256x5hSk4gwrxvgbYHYT+hPjH8Inhtdi8=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.6e640a7b23ef5e54d19a05589bc70221f7d7848f1085842b5f3c8d4d9b8219ea.js integrity="sha256-bmQKeyPvXlTRmgVYm8cCIffXhI8QhYQrXzyNTZuCGeo=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>OCF Sysadmin DeCal</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/syllabus/>Syllabus</a></li><li><input type=checkbox id=section-638171d5990482642c69d9e2d942b1e4 class=toggle>
<label for=section-638171d5990482642c69d9e2d942b1e4 class=flex><a role=button class=flex-auto>Announcements</a></label><ul><li><a href=/announcements/week-0/>Week 0</a></li><li><a href=/announcements/week-1/>Week 1</a></li><li><a href=/announcements/week-2/>Week 2</a></li><li><a href=/announcements/week-3/>Week 3</a></li><li><a href=/announcements/week-4/>Week 4</a></li><li><a href=/announcements/week-5/>Week 5</a></li><li><a href=/announcements/week-6/>Week 6</a></li><li><a href=/announcements/week-7/>Week 7</a></li><li><a href=/announcements/week-8/>Week 8</a></li><li><a href=/announcements/week-9/>Week 9</a></li></ul></li><li><input type=checkbox id=section-70822959fae8f27c0f79dc3a8400cebe class=toggle checked>
<label for=section-70822959fae8f27c0f79dc3a8400cebe class=flex><a role=button class=flex-auto>Labs</a></label><ul><li><a href=/labs/1/>Lab 1 - Unix, the Shell, OSS</a></li><li><a href=/labs/2/>Lab 2 - Core Shell & Shell Scripting</a></li><li><a href=/labs/3/>Lab 3 - Packages and Packaging</a></li><li><a href=/labs/4/>Lab 4 - Processes and Services</a></li><li><a href=/labs/5/>Lab 5 - Introduction to Networking</a></li><li><a href=/labs/6/>Lab 6 - Web Servers</a></li><li><a href=/labs/7/ class=active>Lab 7 - Security Fundamentals</a></li><li><a href=/labs/8/>Lab 8 - Version Control and Backups</a></li><li><a href=/labs/9/>Lab 9 - Containers (Docker)</a></li><li><a href=/labs/10/>Lab 10 - Puppet</a></li><li><a href=/labs/11/>Lab 11 - Kubernetes</a></li><li><a href=/labs/12/>Lab 12 - CUDA</a></li></ul></li><li><a href=/staff/>Staff</a></li><li><a href=/resources/>Resources</a></li></ul><ul><li><a href=https://edstem.org target=_blank rel=noopener>Ed</a></li><li><a href=https://ocf.berkeley.edu target=_blank rel=noopener>OCF</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Lab 7 - Security Fundamentals</h3><label for=toc-control></label></div></header><article class="markdown book-article"><p>For this lab, we will use
<a href=https://gnupg.org>GnuPG</a> (also referred to as GPG), a free implementation of the
<a href=https://openpgp.org/>OpenPGP standard</a>. As stated by GPG&rsquo;s website:</p><blockquote><p>GnuPG allows you to encrypt and sign your data and communications; it features a versatile key management system, along with access modules for all kinds of public key directories.</p></blockquote><p>The
<a href=https://www.gnupg.org/gph/de/manual/r1023.html>GPG manual page</a> might be useful.</p><h2 id=encryption-and-decryption>Encryption and Decryption
<a class=anchor href=#encryption-and-decryption>#</a></h2><p>Encryption takes in a plaintext and a key, returning ciphertext. Decryption takes in a ciphertext and a key, recovering and returning the original plaintext only if the decryption key is valid. The keys for encryption and decryption are long strings of random bits that make it computationally infeasible for an attacker to guess the key and decrypt a ciphertext.</p><p><img src=https://docs.oracle.com/cd/E19424-01/820-4811/images/scrypt.gif alt=alt></p><h3 id=symmetric-cryptography>Symmetric Cryptography
<a class=anchor href=#symmetric-cryptography>#</a></h3><p>In symmetric cryptography, the keys used for encryption and decryption are the same.</p><p>To try it out:</p><ol><li><code>gpg --symmetric [FILE]</code> on any file to output a <code>[FILE].gpg</code> file which is the encrypted version of the inputted file. You&rsquo;ll need to enter a password when encrypting the file.</li><li><code>gpg --decrypt [FILE].gpg</code> on the encrypted version of original file, upon which you&rsquo;ll need to enter the original password.</li></ol><p>In this GPG implementation, encryption and decryption of your file both require knowledge of a single password, which in this case serves as the symmetric key.</p><h3 id=asymmetric-cryptography>Asymmetric Cryptography
<a class=anchor href=#asymmetric-cryptography>#</a></h3><p>In asymmetric cryptography, two separate keys are respectively used for encryption and decryption. These two keys come in a public-private pair. The public key is made known publicly and used to encrypt data. Whereas, the private key is kept secret by the owner and used to decrypt data. Encryption of a file with a public key implies that only someone with the corresponding private key can the decrypt the resulting encrypted file.</p><h4 id=gpg-keyring-abstraction>GPG Keyring Abstraction
<a class=anchor href=#gpg-keyring-abstraction>#</a></h4><p>GPG uses a &ldquo;keyring&rdquo; as a centralized location to hold all of a user&rsquo;s keys. You&rsquo;ll need to add/import a key to your keyring if you wish to use it and keep it around. Similarly, if you wish to share a key with someone else, you can export your key (which makes a copy of your key) and have them import it to their keyring.</p><p>To try it out:</p><ol><li><code>gpg --full-generate-key</code> to generate a GPG public-private key pair. It&rsquo;ll ask for a password.
<em>If your machine is taking a while to generate a key, it may be due to a lack of entropy (randomness) that is needed for a long, random key. <code>sudo apt-get install haveged</code> will install a daemon that generates entropy.</em></li><li><code>gpg --recipient [RECIPIENT] --encrypt [FILE]</code> which&rsquo;ll encrypt <code>[FILE]</code> with <code>[RECIPIENT]</code>&rsquo;s public key (for now, try encrypting a file with your own public key).</li><li><code>gpg --decrypt [FILE].gpg</code> will search through your keyring and decrypt the file with the appropriate private key (if you possess the correct private key, of course).
<em>You don&rsquo;t need to specify which key to decrypt a file with because GPG-encrypted files and keys contain metadata that allow GPG to pick the correct key from the keyring to decrypt the file with.</em></li></ol><h3 id=signatures>Signatures
<a class=anchor href=#signatures>#</a></h3><p>The asymmetric scheme involving encryption with public key and decryption with private key can also be reversed to implement digital signatures whose role is equivalent to that of physical signatures. In this reversed scheme, the private key is used to sign a file, producing a signature on that file. And the corresponding public key is used to verify the signature. Therefore, only a person with the private key can produce a signature, but anyone with the corresponding public key can verify that signature.</p><p><img src=https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Illustration_of_digital_signature.svg/1920px-Illustration_of_digital_signature.svg.png alt=alt></p><p>To try it out:
<code>gpg --sign [FILE]</code> to sign <code>[FILE]</code> with your private key. <code>gpg --verify [FILE].gpg</code> to verify that the file was signed by one of public keys on your keyring.</p><h2 id=hashing-checksums>Hashing (Checksums)
<a class=anchor href=#hashing-checksums>#</a></h2><p>Hash functions deterministically map arbitrary-length data to a fixed-length string of bits (AKA a hash). As a result, the latter can serve as a summary of the former if the former exceeds the latter in terms of byte length. For instance, if we download a 1GB file and want to verify its integrity, instead of re-downloading the entire file again, we can simply compute a 256-bit hash of the file on our end and compare it to the 256-bit hash of source, which is known as a checksum.</p><p>To try it out:</p><ol><li><code>sha1sum [FILE]</code> to get the SHA1 hash of <code>[FILE]</code>.</li><li><code>md5sum [FILE]</code> to get the MD5 hash of <code>[FILE]</code>.</li></ol><p>There are
<a href=https://en.wikipedia.org/wiki/List_of_hash_functions>many hash functions</a>, only some of which satisfy the requirements of cryptographic hash functions. Crytographic hash functions primarily differ from their non-cryptographic counterparts in that they provide a property that make it computationally infeasible to forge a pre-hash file that maps to the same hash. If you are interested in all of the properties of a cryptographic hash function,
<a href=https://en.wikipedia.org/wiki/Cryptographic_hash_function>read here</a>. In particular, SHA1 and MD5 have been proven to no longer be cryptographically secure and are only used for checksums to ensure data integrity.</p><h2 id=file-security>File Security
<a class=anchor href=#file-security>#</a></h2><p>The UNIX permission model has 3 components: permissions given to the file&rsquo;s (1) owning user, (2) owning group and (3) others/everyone else. Permissions themselves have 3 subcomponents: (1) read, (2) write and (3) execute, enforcing the ability to read, write or execute a file.</p><p><img src=https://www.comentum.com/images/permissions.jpg alt=alt></p><p>To try it out:</p><ol><li><code>ls -l</code> shows all the permissions of the current directory&rsquo;s files in the leftmost column.</li><li><code>chown [-R] [NEWUSER]:[NEWGROUP] [FILE]</code> to change <code>[FILE]</code>&rsquo;s user and group ownerships respectively to <code>[NEWUSER]</code> and <code>[NEWGROUP]</code>.</li><li><code>chmod [-R] [PERMISSIONS] [FILE]</code> to set <code>[FILE]</code> with specified <code>[PERMISSIONS]</code>.</li></ol><h2 id=lab-checkoff>Lab Checkoff
<a class=anchor href=#lab-checkoff>#</a></h2><h3 id=submission>Submission
<a class=anchor href=#submission>#</a></h3><p>Submit answers to each question on Gradescope.</p><h3 id=setup>Setup
<a class=anchor href=#setup>#</a></h3><p>You should complete this lab on your student VM.</p><p>Once you&rsquo;re connected to your VM, you&rsquo;ll need download files for this lab:</p><p><code>wget https://github.com/0xcf/decal-labs/raw/master/7/lab7.zip</code>
<code>unzip lab7.zip -d lab7</code>
<code>cd lab7</code></p><h3 id=encryption-and-decryption-1>Encryption and Decryption
<a class=anchor href=#encryption-and-decryption-1>#</a></h3><ol><li>Decrypt <code>file1.txt.gpg</code> with the password <code>ocfdecal</code> (<em>for real-life purposes, never store passwords in plaintext</em>). What are the decrypted contents of <code>file1.txt.gpg</code>?</li><li>What command allows you to import a key?</li><li>What command allows you to export a key to a file? (Add the <code>--armor</code> flag to ASCII-encode the key so it can be sent easily in text form)</li><li>What command allows you to see all of the keys on your keyring?</li><li>Use the private key <code>lab7privkey</code> to decrypt the file <code>file2.txt.gpg</code> (<em>for real-life purposes, it is necessary to keep private keys secret</em>). What are the decrypted contents of <code>b8/file2.txt.gpg</code>?</li></ol><h3 id=hashing-checksums-1>Hashing (Checksums)
<a class=anchor href=#hashing-checksums-1>#</a></h3><ol><li>What is the MD5 hash of <code>file3.txt</code>?</li><li>What is the SHA1 hash of the MD5 hash of <code>file3.txt</code>? In other words, what is <code>SHA1(MD5(file3.txt))</code>?</li></ol><h3 id=file-security-1>File Security
<a class=anchor href=#file-security-1>#</a></h3><p>Run <code>sudo setup.sh</code> before beginning this section.</p><ol><li><code>file4.txt</code>: What are the permissions of this file? Explain what they allow and disallow.</li><li><code>file5</code>: Make this file executable and execute it. What is its printout?</li><li><code>file6.txt</code>: Change this file to be under your ownership. What command did you use?</li><li><code>file7.txt</code>: Make this file readable only to you. What command did you use?</li><li><code>file8.txt</code>: Change this file&rsquo;s permissions such that only root should be able to read this file and no one should be able to edit it. What command did you use?</li><li><code>file9.txt</code>: Choose any method to make this file readable to you and unreadable to the previous owner. What command did you use?</li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><div class="flex flex-wrap justify-between"><span><a href=/labs/6/ class="flex align-center book-icon"><img src=/svg/backward.svg class=book-icon alt=Previous title="Lab 6 - Web Servers">
<span>Lab 6 - Web Servers</span>
</a></span><span><a href=/labs/8/ class="flex align-center book-icon"><span>Lab 8 - Version Control and Backups</span>
<img src=/svg/forward.svg class=book-icon alt=Next title="Lab 8 - Version Control and Backups"></a></span></div><div class="col-lg-12 text-center"><p style=display:flex;justify-content:center;align-items:center><a href=https://www.janestreet.com class=no-underline><img src=/jane-street.svg style=height:50px>
</a><span style=padding-left:10px ;>Thanks to
<a href=https://www.janestreet.com>Jane Street</a> for supporting the DeCal.</span></p><p style=display:flex;justify-content:center;align-items:center><a href=https://www.ocf.berkeley.edu class=no-underline><img src=https://www.ocf.berkeley.edu/hosting-logos/ocf-hosted-penguin.svg alt="Hosted by the OCF" style=height:50px style=border:0></a>
<span style=padding-left:10px ;>Copyright &copy; 2017-2025
<a href=https://www.ocf.berkeley.edu>Open Computing Facility </a>and
<a href=https://xcf.berkeley.edu>eXperimental Computing Facility</a></span></p><p><span>This website and its course materials are licensed under the terms of the
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0
</a>License.
<a href=https://github.com/0xcf/decal-web/>Source Code </a>available on GitHub</span></p></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div></main></body></html>